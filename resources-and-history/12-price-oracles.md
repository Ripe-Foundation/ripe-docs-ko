---
description: 당신의 자산 가치의 진실
---

# 가격 오라클: 당신의 자산 가치의 진실

## DeFi 프로토콜의 생존을 좌우하는 가격 시스템

단 하나의 잘못된 가격 피드가 프로토콜 전체를 무너뜨릴 수 있습니다. 가짜 시세 급등으로 포지션이 청산되고, 보안 취약점 악용으로 수백만 달러가 유출되며, 악의적인 업데이트로 투자자가 전 재산을 잃을 수도 있습니다.

Ripe는 단일 소스에 의존하지 않습니다. Chainlink, Pyth, Stork, Curve를 우선순위대로 확인해서 첫 번째 유효한 가격을 가져옵니다. 하나가 실패하면 즉시 다음 순위 오라클을 사용합니다.

당신의 담보 가치는 그 순간 가장 신뢰할 수 있는 소스에서 나옵니다.

## Ripe에서 가격이 중요한 이유

모든 핵심 프로토콜 운영이 정확한 가격 책정에 달려있습니다:

- **대출 한도**: 담보 가치가 GREEN 대출 가능 금액을 결정
- **청산 안전성**: 가격 변동으로 위험한 포지션이 청산됨
- **상환 가치**: 직접 상환 시 GREEN을 정확히 $1 상당의 담보로 교환
- **안정화 풀 수익**: 청산 할인율이 현재 시장 가격으로 계산됨
- **이자율**: 변동 금리가 GREEN의 시장 가격에 반응

이렇게 많은 것이 걸려있기에, 우리는 견고하고 투명한 가격 시스템을 구축했습니다.

## 멀티 오라클의 장점

단일 가격 피드에 의존하는 대신, Ripe는 여러 독립적인 오라클 공급자를 통합합니다:

```
자산 가격 요청 흐름:

당신의 자산 (예: ETH)
    ↓
가격 데스크 (Price Desk, 오라클 애그리게이터)
    ↓
1. 우선순위 오라클 확인 (Chainlink 먼저)
2. 가격이 없으면 보조 오라클 확인
3. 첫 번째 유효한 가격 반환
    ↓
정확한 USD 가치
```

이러한 설계가 제공하는 이점:

- **단일 장애점 없음**: Chainlink가 다운되어도 Pyth가 가격을 제공
- **자산 유연성**: 서로 다른 오라클이 다양한 자산을 지원
- **비용 최적화**: 중요한 자산에만 비싼 오라클 사용
- **미래 대비**: 새로운 오라클 공급자를 매끄럽게 추가 가능

## 우리의 오라클 공급자

### 1. Chainlink (기본)

탈중앙화 가격 피드의 업계 표준:

- **지원 자산**: 주요 암호화폐 자산 (ETH, BTC, 스테이블코인, 블루칩)
- **신뢰성**: DeFi에서 수십억 달러를 보호하며 실전 검증됨
- **업데이트 빈도**: 변동성에 따라 자산별로 차이
- **신뢰 모델**: 평판 있는 탈중앙화 노드 운영자

Chainlink는 검증된 실적과 광범위한 배포를 바탕으로 대부분 주류 자산의 주 오라클 역할을 합니다.

### 2. Curve 풀 (Curve Pools, 특화)

최대 스테이블코인 유동성 풀에서 직접 가격 정보를 가져옵니다:

- **지원 자산**: 스테이블코인, Curve LP 토큰, GREEN 페어
- **신뢰성**: 실제 거래 가능한 유동성 기반
- **특수 기능**: GREEN의 페그를 실시간 모니터링
- **신뢰 모델**: 온체인 자동화된 마켓 메이커 (AMM) 상태, 조작 방지

**GREEN 안정성의 핵심**: Curve 가격 피드는 [변동 금리](../core-protocol/02-borrowing.md#dynamic-interest-rates-emergency-mechanism-only)에 직접 영향을 미치는 "Green Reference Pool" 데이터를 관리합니다. GREEN/USDC 풀 잔액의 시간 가중 스냅샷(일정 기간 동안의 평균값)을 통해 프로토콜이 GREEN이 $1 페그 아래로 거래되는 것을 감지하고 자동으로 대출 비용을 조정해 균형을 회복합니다.

**실제 작동 예시**: GREEN이 $0.98로 떨어지면 → 시스템이 감지 → 대출 금리 상승 → 대출자들이 GREEN을 사서 빚을 갚으려 함 → GREEN 수요 증가 → 가격이 $1로 회복됩니다. 이런 강력한 피드백 루프가 페그를 자동으로 지켜냅니다.

### 3. Pyth Network (고빈도)

기관 공급자로부터 1초 미만 가격 업데이트:

- **지원 자산**: 주식, 외환, 상품, 암호화폐 등 폭넓은 자산
- **신뢰성**: 전문 마켓 메이커가 데이터 제공
- **업데이트 빈도**: 필요시 매 슬롯마다 업데이트 가능
- **신뢰 모델**: 여러 기관 소스에서 집계

빈번한 업데이트가 필요하거나 Chainlink가 지원하지 않는 자산에 유용합니다.

### 4. Stork Network (신규)

독특한 기능을 가진 차세대 오라클:

- **지원 자산**: 지원 범위를 점차 넓혀가는 DeFi 자산들
- **신뢰성**: 새로운 암호학적 증명 방식
- **업데이트 빈도**: 나노초 단위까지 지원하는 온디맨드 업데이트
- **신뢰 모델**: 지분을 가진 탈중앙화 퍼블리셔 노드(발행자)

추가 중복성을 제공하고 새로운 자산을 지원합니다.

### 5. 블루칩 수익 가격 (Blue Chip Yield Prices, 특화)

주요 DeFi 프로토콜의 수익 창출형 토큰(이자가 자동으로 쌓이는 토큰)을 위한 맞춤 가격 책정:

- **지원 자산**: aTokens (Aave 예치 증표), cTokens (Compound 예치 증표), Morpho 포지션, Euler 등
- **신뢰성**: 각 프로토콜 컨트랙트와 직접 통합
- **특수 기능**: 리베이싱(잔액 자동 증가)과 수익 누적을 정확히 처리
- **신뢰 모델**: 기반 프로토콜의 회계 시스템 기반

이 토큰들은 시간이 지남에 따라 가치가 증가하며, 그 증가분까지 정확히 계산하여 담보 가치를 산정한다는 뜻입니다.

**2계층 가격 책정**: 이 오라클은 실시간 기반 자산 가격(Chainlink나 다른 주 오라클에서)과 지분 가격/환율의 시간 가중 스냅샷(일정 기간 동안의 평균값)을 결합합니다.

**실제 작동 예시**: Morpho USDC 포지션을 가격 책정할 때:

- **기반 USDC 가격**: Chainlink에서 실시간으로 가져온 가격 ($1.00)
- **Morpho 지분 가격**: 시간 가중 평균 (예: 지분당 1.05 USDC)
- **최종 포지션 가치**: $1.00 × 1.05 = 지분당 $1.05

**조작 방지**: 환율에만 가중 스냅샷이 사용되고 기반 자산 가격은 최신으로 유지됩니다. 이렇게 복잡하게 설계한 이유는 공격자가 플래시론(순간 대출)이나 일시적 가격 스파이크로 수익 토큰의 환율을 조작하는 것을 막으면서도, 담보가 기반 자산(예: USDC)의 실제 시장 움직임에는 즉시 반응할 수 있게 하기 위해서입니다. 또한 급격한 가치 상승이 있어도 즉시 받아들이지 않고 점진적으로 반영해서 시스템을 보호합니다.

## ⚠️ 만료된 가격 방지

**중요**: 만료된 가격 데이터는 프로토콜을 위험에 빠뜨립니다. 우리의 방지 방법은 다음과 같습니다:

### 전역 가격 갱신 기준치

- 기본값: 대부분 자산에 대해 3600초(1시간)
- 변동성 큰 자산에는 더 엄격한 제한
- USDC 같은 안정 자산에는 완화된 제한

### 오라클별 설정

각 오라클마다 별도의 만료 기준치를 설정할 수 있습니다:

- Chainlink: 라운드 타임스탬프 사용
- Pyth/Stork: 발행 타임스탬프 사용
- Curve: 항상 최신 (풀 상태에서 직접 읽기)
- 블루칩: 최소 지연을 가진 스냅샷 기반

### 가격이 만료되면 어떻게 될까요?

1. **주 오라클 만료**: 시스템이 자동으로 보조 오라클들을 확인
2. **모든 오라클 만료**: 운영을 다음 중 하나로 설정 가능:
   - 마지막 알려진 가격 사용 (일반적인 거래용)
   - 거래 되돌리기 (청산 같은 중요한 운영용)
3. **피드 없음**: 피드가 없는 새 자산은 담보로 사용 불가

**실제 작동 예시**: ETH 가격이 1시간 넘게 업데이트 안 됐다면 → 시스템이 Pyth나 Stork에서 최신 ETH 가격을 찾아서 사용 → 모든 오라클이 다 만료됐다면 새로운 대출은 막고 기존 포지션의 담보 가치는 마지막 가격으로 유지됩니다.

## 가격 우선순위 시스템

모든 오라클이 같은 수준은 아닙니다. 우리의 우선순위 시스템은 최고의 가격 소스가 사용되도록 보장합니다:

```
우선순위 (설정 가능):
1. Chainlink (주요 자산에 가장 신뢰할 만함)
2. Curve 풀 (스테이블코인과 LP 토큰용)
3. Pyth Network (Chainlink 자산의 백업)
4. Stork Network (추가 중복성)
5. 블루칩 수익 가격 (수익 창출형 토큰용)
```

거버넌스는 다음을 바탕으로 우선순위를 조정할 수 있습니다:

- 오라클 신뢰성 이력
- 업데이트용 가스비
- 자산별 고려사항
- 시장 조건

## 보안 조치

### 시간 잠금 변경

- 새 오라클 추가: 24시간 지연
- 오라클 우선순위 변경: 12시간 지연
- 피드 업데이트: 6시간 지연
- 긴급 비활성화: 즉시 (거버넌스 멀티시그)

### 안전 장치 메커니즘

- **자동 전환**: 주 오라클 문제 시 백업으로 즉시 전환
- **긴급 정지**: 문제 있는 피드 발견 시 즉시 비활성화
- **자금 회수**: 오라클 업데이트에 쓴 가스비 회수 기능
- **거버넌스 개입**: 위급 상황 시 수동으로 시스템 제어 가능

**실제 작동 예시**: Chainlink ETH 피드에 문제가 발생하면 → 자동으로 Pyth ETH 가격 사용 → 그것도 문제면 Stork 사용 → 거버넌스가 상황을 파악해서 필요시 해당 피드를 완전 비활성화합니다.

## 검증을 통한 신뢰

다른 대출 프로토콜이 말해주지 않는 진실: 아마 오라클 하나만 쓰고 있을 것입니다. 조금 규모 있는 곳이라면 두 개 정도 사용할 것입니다.

Ripe는 4개의 독립적인 가격 소스에 연결되어 즉시 자동 전환이 가능합니다. 주 오라클이 다운됐습니까? 우리는 이미 백업을 사용하고 있습니다. 지연 없고, 수동 개입 없고, 단일 장애점 없습니다.

이는 과잉 대응이 아닙니다. 오라클 장애에서 살아남는 프로토콜과 그렇지 못한 프로토콜의 차이입니다.

당신의 주 오라클이 중단될 때 — 그리고 언젠가는 중단됩니다 — 당신의 포지션은 계속 가격 책정을 받게 됩니다.

이건 기능이 아닙니다. 생존입니다.

---

_기술 구현 세부사항은 다음을 참고하세요 (영문):_

- [_가격 데스크 기술 문서 (영문)_](https://docs.ripe.finance/technical-docs/pricing/pricedesk) _- 오라클 통합 시스템_
- [_Chainlink 가격 (영문)_](https://docs.ripe.finance/technical-docs/pricing/chainlinkprices) _- Chainlink 통합_
- [_Curve 가격 (영문)_](https://docs.ripe.finance/technical-docs/pricing/curveprices) _- AMM 기반 가격 책정 및 GREEN 모니터링_
- [_Pyth 가격 (영문)_](https://docs.ripe.finance/technical-docs/pricing/pythprices) _- 고빈도 오라클 업데이트_
- [_Stork 가격 (영문)_](https://docs.ripe.finance/technical-docs/pricing/storkprices) _- 탈중앙화 가격 증명_
- [_블루칩 수익 가격 (영문)_](https://docs.ripe.finance/technical-docs/pricing/bluechipyieldprices) _- 수익 토큰 평가_
